# Index

- [Information](#information)
- [Notes](#notes)
- [Distribution](#distribution)
- [Maintenance](#maintenance)
- [Modifications](#modifications)

<br>

# TFG
  
  In this project, I have adapted a C++ code using WebAssembly to enable interaction with it from a web page. I have taken the responsibility of giving the page a simple style and creating functions that allow the 
  modification of the shape, enabling the generation of these figures.
  
  To achieve real-time movement on the page, D3.js has been utilized. This framework allows us to interact with the elements of the figure, which in this case are circles.

<br>

# Information

  This webpage allows us, using a shape, to generate a figure through C++ code that has been adapted using WebAssembly.
  
  Users could modify the figure, save it as an image, or upload/download their own shape.
  
  For modifications, users can move circles, increase the radius of these circles, or adjust the smooth factor (that affects their connections with other circles). Users can also add circles, delete them, add   
  connections, insert circles along segments, create random figures, and generate similar figures.

<br>

# Notes

  Tracking of features [Google Docs](https://docs.google.com/document/d/1GtQtelN7FGx5gK_FEvt-q0SWJWtZPghOxBOqhI2w_kc/edit).
  
  You can preview the page in [Website](https://nestormaneiro.github.io/TFG/).

<br>

# Distribution:


  In the BranchedShapesEdition folder, you will find the code used for creating the figures in C++. Next, we have script.bat, which allows us to compile the same code, and shape.txt, which is a file with basic   
  configuration.
  
  The rest, except for blackbox.js, which is generated by WebAssembly just like blackbox.wasm, consists of basic files for a web page.
  
  The JavaScript code is distributed as follows:
  
  1. **blackbox.js**: Created with WebAssembly.
     
  2. **handleEvents.js**: Contains all the functions used for event handling.
     
  3. **init.js**: Initializes all variables and adds all the necessary events.
     
  4. **tools.js**: Contains various implemented functions.
     
  5. **app.js**: Handles everything related to managing WebAssembly and initializing the webpage, such as loading the initial shape.txt.

<br>

# Maintenance ###

  If you make any change inside the "BranchedShapesEdition" folder, you will need to use the /script.bat (You need to change the routes).
  This will make inside the folder:
  
  1. **blackbox.js**
  2. **blackbox.wasm**
  
  On blackbox.js you need to swap:
  
      var _free = createExportWrapper("free");
  
  to this:
  
      var _free = Module["_free"] = createExportWrapper("free");
  
  Then just move this files to the root.
  
<br>

 # Modifications: ###

  Within the BranchedShapedEdition folder, the following should be highlighted:
  
  1. mainBranchedShapesEdition -> The main one, contains functions used on the web.
  2. triangulation.cpp
  3. triangulation.h
     
  These last two (the triangulation files) are usually the ones that need to be replaced for code modifications, sometimes even the BranchedShapesEdition files. However, never replace the main file, as it contains necessary functions for the website, including     
  declarations and method calls to the other files.

  Afterward, it is necessary to compile the C++ code into WebAssembly. To do this, you can use the script.bat, although you would need to modify the directory paths.

  In the first directory, emsdk.bat should be located, and in the second one, where our C++ code is, will also be the location where the new files will be created. Then, you simply need to move these new files to the project's root folder and overwrite the existing ones.
